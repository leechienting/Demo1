### åœ¨ä½¿ç”¨Appium Session Capabilitiesæ™‚ï¼Œè¦è¨­å®šä»€éº¼åƒæ•¸ï¼Œæ‰å¯ä»¥ä¿å­˜æ‰‹æ©Ÿä¸­UserDefailtä¸­çš„è³‡æ–™

åœ¨Â **Appium**Â ä½¿ç”¨Â **Session Capabilities**Â ä¾†ä¿æŒ iOS æ‡‰ç”¨ç¨‹å¼ä¸­çš„Â **UserDefaults**ï¼ˆNSUserDefaultsï¼‰è³‡æ–™ï¼Œé—œéµæ˜¯Â **ä¸è¦åˆªé™¤æ‡‰ç”¨ç¨‹å¼è³‡æ–™**ï¼Œå› æ­¤ï¼Œä½ æ‡‰è©²é—œæ³¨ä»¥ä¸‹å¹¾å€‹åƒæ•¸ï¼š

### **1\. é¿å…Â `reset`Â æ“ä½œ**

Appium åœ¨åŸ·è¡Œæ¸¬è©¦æ™‚ï¼Œå¦‚æœÂ `fullReset`Â æˆ–Â `noReset`Â è¨­å®šä¸ç•¶ï¼Œå¯èƒ½æœƒå°è‡´æ‡‰ç”¨ç¨‹å¼æ•¸æ“šï¼ˆåŒ…å«Â **UserDefaults**ï¼‰è¢«æ¸…é™¤ã€‚

- **`noReset: true`**Â â†’Â **ä¿ç•™æ‡‰ç”¨ç¨‹å¼è³‡æ–™**

- **`fullReset: false`**Â â†’Â **ä¸è¦å®Œå…¨é‡ç½®æ‡‰ç”¨**

### **2\. ç›¸é—œ Session Capabilities è¨­å®š**

```
json
```

è¤‡è£½ç·¨è¼¯

`{ "platformName": "iOS", "deviceName": "iPhone 14", "platformVersion": "17.0", "automationName": "XCUITest", "app": "/path/to/app", "noReset": true, "fullReset": false }`

### **3\. å…¶ä»–å¯èƒ½å½±éŸ¿çš„è¨­å®š**

- **`app`**ï¼šå¦‚æœä½ æä¾›Â `.app`Â æª”æ¡ˆï¼ŒAppium å¯èƒ½æœƒé‡æ–°å®‰è£ Appï¼ˆè¦–æ¸¬è©¦ç’°å¢ƒè€Œå®šï¼‰ï¼Œé€™æ¨£ UserDefaults å¯èƒ½æœƒè¢«é‡ç½®ã€‚

   - **è§£æ³•**ï¼šä½¿ç”¨Â `bundleId`Â å•Ÿå‹•å·²å®‰è£çš„ Appï¼Œé¿å…é‡æ–°å®‰è£ï¼š

      ```
      json
      ```

      è¤‡è£½ç·¨è¼¯

      `{ "bundleId": "com.yourcompany.yourapp", "noReset": true }`

- **`udid`ï¼ˆç‰©ç†æ©Ÿæ¸¬è©¦ï¼‰**ï¼šå¦‚æœæ¸¬è©¦æ™‚åˆ‡æ›ä¸åŒè¨­å‚™ï¼ŒUserDefaults ä¹Ÿå¯èƒ½ä¸åŒï¼Œå› ç‚ºé€™æ˜¯è¨­å‚™æœ¬åœ°å­˜å„²çš„æ•¸æ“šã€‚

### **4\. å…¶ä»–æ–¹å¼æ‰‹å‹•ä¿ç•™ UserDefaults**

å¦‚æœæ¸¬è©¦ç’°å¢ƒç„¡æ³•ç¢ºä¿ UserDefaults ä¿æŒï¼Œå¦ä¸€å€‹æ–¹æ³•æ˜¯ï¼š

- ä½¿ç”¨Â **NSUserDefaults çš„Â `synchronize()`Â æ–¹æ³•**ï¼ˆé€šå¸¸ä¸å»ºè­°ï¼Œå› ç‚ºå®ƒå·²è¢«æ£„ç”¨ï¼‰

- è®€å–Â **UserDefaults ä¸¦è½‰å­˜åˆ°æ¸¬è©¦ç’°å¢ƒ**

- åœ¨æ¸¬è©¦å‰æ‰‹å‹•æ¢å¾© UserDefaults è³‡æ–™ï¼Œä¾‹å¦‚ï¼š

   ```
   swift
   ```

   è¤‡è£½ç·¨è¼¯

   `let defaults = UserDefaults.standard defaults.set("test_value", forKey: "test_key") defaults.synchronize() // ç¢ºä¿æ•¸æ“šè¢«å¯«å…¥`

---

### **çµè«–**

å¦‚æœä½ å¸Œæœ›Â **ä¿ç•™ UserDefaults**ï¼Œå»ºè­°ï¼š

1. **è¨­å®šÂ `noReset: true, fullReset: false`**ï¼ˆé¿å…åˆªé™¤æ‡‰ç”¨è³‡æ–™ï¼‰

2. **ä½¿ç”¨Â `bundleId`Â è€ŒéÂ `app`**ï¼ˆé˜²æ­¢ Appium é‡æ–°å®‰è£ Appï¼‰

3. **é¿å…åœ¨æ¸¬è©¦é–‹å§‹å‰é‡ç½®æ¸¬è©¦ç’°å¢ƒ**

4. **å¦‚æœ‰å¿…è¦ï¼Œåœ¨æ¸¬è©¦é–“æ‰‹å‹•å‚™ä»½èˆ‡é‚„åŸ UserDefaults**

é€™æ¨£æ‡‰è©²å°±èƒ½å¤ è®“Â **UserDefaults**Â çš„è³‡æ–™åœ¨æ¸¬è©¦é–“ä¿ç•™ ğŸš€


