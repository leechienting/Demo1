# 「橫切關注點」（Cross-cutting Concerns）

「橫切關注點」（Cross-cutting Concerns）**指的是那些會影響應用程式中多個模組或層次的行為或功能，但卻無法被單一模組自然地封裝起來的特殊「關注點」**。 這些關注點不是程式的核心業務邏輯，但卻「橫跨」或「切過」了許多不同的程式碼部分。

想像一個處理醫生記錄的應用程式：

- **核心關注點（Core Concern）**：處理和索引醫生記錄是這個應用程式最主要的目的和功能。

- **橫切關注點（Cross-cutting Concern）**：而像記錄資料庫或使用者資訊的變更歷史、日誌記錄 (logging)、安全驗證 (authentication)、效能監控 (performance monitoring) 或交易管理 (transaction management) 等功能，卻會與應用程式中的大部分模組相關聯。這些功能遍佈在許多程式碼中，無法簡單地歸入某個單獨的類別或模組。

當這些橫切關注點直接被寫入負責特定業務邏輯的物件中時，會導致程式碼：

- **分散 (Scattering)**：相同或相似的程式碼片段重複出現在多個地方，例如日誌記錄的邏輯會散落在各個方法中。

- **糾纏 (Tangling)**：核心業務邏輯與非核心邏輯混雜在一起，使得程式碼難以閱讀、理解和維護。

- **難以維護**：如果需要修改或移除某個橫切關注點的功能（例如改變日誌記錄的方式），就必須修改所有相關的程式碼，增加維護成本。

為了解決這個問題，面向切面程式設計 (Aspect-Oriented Programming, AOP) 這種程式設計範式被提出。AOP 的目標是將這些橫切關注點從核心業務邏輯中分離出來，將它們模組化成獨立的「切面 (Aspect)」，然後在執行時期將這些切面「織入 (Weaving)」到應用程式中，而無需修改原始碼。

Method Swizzling 就是一種實現 AOP 的方式，尤其在 Objective-C 和某些 Swift 專案中，它能用來實現對系統框架或第三方庫的橫切關注點（如全域性埋點、效能監控）的無侵入式修改。