# å¯«å¥½.featureï¼Œè¦å¦‚ä½•ç”¢ç”Ÿå°æ‡‰ Step Definitions?

### ğŸ‘‰ .featureæ˜¯Gherkinèªæ³•æª”æ¡ˆ

### ğŸ‘‰  Step Definitionsæ˜¯å°‡ Gherkin æ¸¬è©¦æ¡ˆä¾‹è½‰æ›ç‚ºç¨‹å¼ç¢¼çš„åœ°æ–¹ï¼›æ¯å€‹ Gherkin çš„Â **Given/When/Then**Â **éƒ½æœƒå°æ‡‰åˆ°ä¸€å€‹ Java æ–¹æ³•**ã€‚

## **ğŸ“Œ å¦‚ä½•å¾ `.feature` ç”¢ç”Ÿå°æ‡‰çš„ Step Definitions**

ç•¶ä½ å·²ç¶“å¯«å¥½ **`.feature` æ¸¬è©¦æ¡ˆä¾‹**ï¼ŒCucumber å¯ä»¥å¹«åŠ©ä½ **è‡ªå‹•ç”¢ç”Ÿ**å°æ‡‰çš„ **Step Definitions**ï¼Œä½ åªéœ€è¦**è¤‡è£½è²¼ä¸Š**åˆ°ä½ çš„æ¸¬è©¦ä»£ç¢¼ä¸­ï¼**ğŸ”¹ 1. ä½ çš„ `.feature` æ¸¬è©¦æ¡ˆä¾‹**

å‡è¨­ä½ å·²ç¶“å¯«å¥½ \*\*`login.feature`\*\*ï¼Œå…§å®¹å¦‚ä¸‹ï¼š

```gherkin
Feature: ä½¿ç”¨è€…ç™»å…¥åŠŸèƒ½

  Scenario: æˆåŠŸç™»å…¥
    Given ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢
    When ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ "user123" å’Œå¯†ç¢¼ "password123"
    And æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•
    Then ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°é¦–é 
```

---

## **ğŸ”¹ 2. åŸ·è¡Œ Cucumber æ¸¬è©¦ä¾†ç”¢ç”Ÿ Step Definitions**

å¦‚æœä½ é‚„æ²’æœ‰å®šç¾©å°æ‡‰çš„ **Step Definitions**ï¼ŒCucumber æœƒè‡ªå‹•é¡¯ç¤º**ç¼ºå°‘çš„æ­¥é©Ÿå®šç¾©**ï¼Œä¸¦æä¾›å°æ‡‰çš„ **Java ä»£ç¢¼**ã€‚

### **âœ… åœ¨ Android Studio æˆ– IntelliJ ç”¢ç”Ÿ**

1ï¸âƒ£ **åŸ·è¡Œ `login.feature` æ¸¬è©¦æ¡ˆä¾‹**

- ä½ å¯ä»¥å³éµ `login.feature`ï¼Œé¸æ“‡ **Run 'login.feature'**

- æˆ–è€…ä½¿ç”¨ **Cucumber JUnit Runner** ä¾†åŸ·è¡Œ

2ï¸âƒ£ **Cucumber æœƒé¡¯ç¤ºç¼ºå°‘çš„ Step Definitions**

- å¦‚æœæ²’æœ‰å°æ‡‰çš„ `Step Definitions`ï¼ŒCucumber æœƒåœ¨ Console è¼¸å‡º**è‡ªå‹•ç”Ÿæˆçš„ä»£ç¢¼**ï¼Œå¦‚ä¸‹ï¼š

```java
@Given("ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢")
public void ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢() {
    // TODO: åœ¨é€™è£¡å¯¦ä½œé–‹å•Ÿæ‡‰ç”¨çš„ä»£ç¢¼
}

@When("ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ {string} å’Œå¯†ç¢¼ {string}")
public void ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ_å’Œå¯†ç¢¼(String username, String password) {
    // TODO: åœ¨é€™è£¡å¯¦ä½œè¼¸å…¥å¸³è™Ÿèˆ‡å¯†ç¢¼çš„ä»£ç¢¼
}

@And("æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•")
public void æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•() {
    // TODO: åœ¨é€™è£¡å¯¦ä½œæŒ‰éˆ•é»æ“Šçš„ä»£ç¢¼
}

@Then("ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°é¦–é ")
public void ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°é¦–é () {
    // TODO: åœ¨é€™è£¡å¯¦ä½œé©—è­‰ç™»å…¥æˆåŠŸçš„ä»£ç¢¼
}
```

---

## **ğŸ”¹ 3. åœ¨ `Step Definitions` æ–‡ä»¶ä¸­è²¼ä¸Šä»£ç¢¼**

1ï¸âƒ£ **å‰µå»º `Step Definitions` é¡åˆ¥**

- åœ¨ `src/test/java/steps/` ç›®éŒ„ä¸‹ï¼Œæ–°å¢ä¸€å€‹ `LoginSteps.java`

- ç„¶å¾ŒæŠŠ Cucumber è‡ªå‹•ç”¢ç”Ÿçš„ä»£ç¢¼**è¤‡è£½è²¼ä¸Š**åˆ° `LoginSteps.java`

ğŸ“Œ **å®Œæ•´ç¯„ä¾‹**

```java
package steps;

import io.cucumber.java.en.*;

public class LoginSteps {

    @Given("ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢")
    public void ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢() {
        System.out.println("æ‡‰ç”¨ç¨‹å¼å·²å•Ÿå‹•ï¼Œä½¿ç”¨è€…åœ¨ç™»å…¥é é¢");
    }

    @When("ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ {string} å’Œå¯†ç¢¼ {string}")
    public void ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ_å’Œå¯†ç¢¼(String username, String password) {
        System.out.println("è¼¸å…¥å¸³è™Ÿï¼š" + username);
        System.out.println("è¼¸å…¥å¯†ç¢¼ï¼š" + password);
    }

    @And("æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•")
    public void æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•() {
        System.out.println("æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•");
    }

    @Then("ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°é¦–é ")
    public void ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°é¦–é () {
        System.out.println("ç™»å…¥æˆåŠŸï¼Œé€²å…¥é¦–é ");
    }
}
```

âœ… **é€™æ¨£ä½ å°±æˆåŠŸå»ºç«‹äº†å°æ‡‰çš„ Step Definitionsï¼**

---

## **ğŸ”¹ 4. å†æ¬¡åŸ·è¡Œ `.feature` æ¸¬è©¦**

ç¾åœ¨ä½ çš„ **Step Definitions** å·²ç¶“æº–å‚™å¥½ï¼Œä½ å¯ä»¥å†æ¬¡åŸ·è¡Œ `login.feature`ï¼š

- **å³éµ `login.feature`** â†’ **Run 'login.feature'**

- é€™æ¬¡ Cucumber æœƒåŸ·è¡Œå°æ‡‰çš„ **Java æ–¹æ³•**ï¼Œä¸¦é¡¯ç¤ºæ¸¬è©¦çµæœã€‚

å¦‚æœæœ‰ä½¿ç”¨ **JUnit Runner**ï¼Œä¹Ÿå¯ä»¥é€™æ¨£é‹è¡Œï¼š

```java
import org.junit.runner.RunWith;
import io.cucumber.junit.Cucumber;
import io.cucumber.junit.CucumberOptions;

@RunWith(Cucumber.class)
@CucumberOptions(features = "src/test/resources/features", glue = "steps")
public class RunCucumberTest {
}
```

- `features = "src/test/resources/features"`ï¼šæŒ‡å®š `.feature` æ–‡ä»¶çš„å­˜æ”¾ä½ç½®

- `glue = "steps"`ï¼šæŒ‡å®š `Step Definitions` çš„åŒ…å

---

## **ğŸ”¹ 5. æœ€ä½³åŒ– Step Definitionsï¼ˆé€²éšï¼‰**

ç¾åœ¨ä½ çš„ **Step Definitions** åªæ˜¯è¼¸å‡ºè¨Šæ¯ï¼Œæ¥ä¸‹ä¾†ä½ å¯ä»¥ï¼š

- **æ•´åˆ Appiumï¼Œè®“æ¸¬è©¦çœŸçš„åŸ·è¡Œ UI æ“ä½œ**

- **ä½¿ç”¨ Page Object Modelï¼ˆPOMï¼‰**ï¼Œè®“ä»£ç¢¼æ›´æœ‰çµæ§‹

- **åŠ å…¥ Assertionsï¼ˆé©—è­‰æ¸¬è©¦çµæœï¼‰**

### **ğŸ“Œ ä½¿ç”¨ Appium æ§åˆ¶ UI**

```java
import io.appium.java_client.MobileElement;
import io.appium.java_client.android.AndroidDriver;
import io.cucumber.java.en.*;

public class LoginSteps {
    private AndroidDriver<MobileElement> driver;

    @Given("ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢")
    public void user_is_on_login_page() {
        driver.launchApp(); // å•Ÿå‹• App
    }

    @When("ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ {string} å’Œå¯†ç¢¼ {string}")
    public void user_enters_credentials(String username, String password) {
        driver.findElementById("usernameField").sendKeys(username);
        driver.findElementById("passwordField").sendKeys(password);
    }

    @And("æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•")
    public void user_clicks_login_button() {
        driver.findElementById("loginButton").click();
    }

    @Then("ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°é¦–é ")
    public void user_sees_home_page() {
        boolean isHomeDisplayed = driver.findElementById("homePage").isDisplayed();
        assert isHomeDisplayed : "ç™»å…¥å¤±æ•—";
    }
}
```

é€™æ¨£å°±èƒ½è®“ **Cucumber + Appium** çœŸçš„å»åŸ·è¡Œ UI æ¸¬è©¦äº†ï¼ ğŸš€

---

## **ğŸš€ ç¸½çµ**

âœ… **Cucumber å¯ä»¥è‡ªå‹•ç”¢ç”Ÿ Step Definitions**ï¼Œä½ åªéœ€è¦åŸ·è¡Œ `.feature` æ¸¬è©¦ä¸¦è¤‡è£½ä»£ç¢¼\
âœ… \*\*å°‡è‡ªå‹•ç”¢ç”Ÿçš„ Step Definitions è²¼åˆ° `LoginSteps.java`\*\*ï¼Œä¸¦è£œå…… UI æ“ä½œé‚è¼¯\
âœ… **å¯ä»¥æ•´åˆ Appium ä¾†åŸ·è¡Œ UI æ¸¬è©¦**ï¼Œè®“ Cucumber æ¸¬è©¦æ›´æœ‰åƒ¹å€¼  