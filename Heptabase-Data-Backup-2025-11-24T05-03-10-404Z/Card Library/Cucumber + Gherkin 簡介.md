# Cucumber + Gherkin ç°¡ä»‹

---

# **ğŸ”¹ 1. ä»€éº¼æ˜¯ Cucumberï¼Ÿ**

**Cucumber** æ˜¯ä¸€ç¨®æ”¯æ´ BDD æ¸¬è©¦æ¡†æ¶ï¼Œå¯ä»¥å¹«åŠ©é–‹ç™¼äººå“¡å’Œæ¸¬è©¦äººå“¡æ’°å¯«ã€Œ**å¯è®€ã€å¯åŸ·è¡Œçš„æ¸¬è©¦**ã€ã€‚å®ƒçš„æ ¸å¿ƒç‰¹é»æ˜¯ **ä½¿ç”¨è‡ªç„¶èªè¨€æè¿°æ¸¬è©¦å ´æ™¯**ï¼Œä¸¦ä¸”å¯ä»¥èˆ‡ **Appium** æˆ– **Selenium** ä¸€èµ·ç”¨ä¾†åš **UI è‡ªå‹•åŒ–æ¸¬è©¦**ã€‚

âœ… **Cucumber ç‰¹é»**

- **ä½¿ç”¨ Gherkin èªæ³•**ï¼ˆé¡ä¼¼è‡ªç„¶èªè¨€ï¼Œå®¹æ˜“ç†è§£ï¼‰

- **æ”¯æ´å¤šç¨®ç¨‹å¼èªè¨€**ï¼ˆJavaã€Kotlinã€Pythonã€JavaScript ç­‰ï¼‰

- **èˆ‡ Appium/Selenium æ•´åˆ**ï¼Œé©åˆ UI æ¸¬è©¦

- **ç”Ÿæˆæ¸¬è©¦å ±å‘Š**ï¼Œé©åˆ CI/CD

---

# **ğŸ”¹ 2. ä»€éº¼æ˜¯ Gherkinï¼Ÿ**

### ğŸ‘‰  Gherkinæ˜¯BDD çš„æ¸¬è©¦èªæ³•ã€‚

**Gherkin** æ˜¯ä¸€ç¨®**çµæ§‹åŒ–çš„è‡ªç„¶èªè¨€**ï¼Œç”¨ä¾†æè¿° **Cucumber æ¸¬è©¦æ¡ˆä¾‹**ï¼Œå¯ä»¥è®“**éæŠ€è¡“äººå“¡**ä¹Ÿèƒ½å¤ ç†è§£æ¸¬è©¦å…§å®¹ã€‚

## ğŸ¯ Gherkin æœ‰å¹¾å€‹ç›®çš„ï¼š

- èƒ½æå¯«æ˜ç¢ºå¯åŸ·è¡Œçš„ specificationï¼Œè®“ Cucumber èƒ½çœ‹æ‡‚ï¼ŒåŒæ™‚å…·å‚™äººé¡èªæ„å¯è®€æ€§ã€‚

- èƒ½é€é Cucumber é€²è¡Œè‡ªå‹•åŒ–æ¸¬è©¦ã€‚

- èƒ½æ–‡ä»¶åŒ–ç³»çµ±çš„å¯¦éš›è¡Œç‚º(actually behaves)ã€‚

- Gherkin çš„æ’°å¯«æ”¯æ´è¨±å¤šç¨®äººé¡èªè¨€ï¼Œåœ˜éšŠå¯ä»¥ç”¨è‡ªå·±å–œæ­¡çš„èªè¨€

   - e.g., è‹±æ–‡ã€ç¹ç°¡é«”ä¸­æ–‡â€¦.ç­‰70å¤šç¨®ã€‚

   - åƒè€ƒï¼š[æ”¯æ´èªè¨€](https://cucumber.io/docs/gherkin/reference/#spoken-languages)

## **ğŸ“Œ Gherkin èªæ³•åŸºç¤**

### âœ… **Gherkin æ–‡ä»¶**

- ä¸€å€‹å°ˆæ¡ˆæœ‰å¾ˆå¤š featureï¼Œä¸€å€‹Â `.feature`Â æª”è£¡æœ‰å¾ˆå¤š scenarioï¼Œä¸€å€‹ scenario æœ‰å¾ˆå¤šstep

- feature æª”è£¡ï¼Œæ¯å€‹Â `Gherkin Step`Â å‰é¢éƒ½æœƒé…ä¸€å€‹é—œéµå­—ï¼Œä¾‹å¦‚Â `Given`,Â `Whenâ€¦`

### âœ… **Gherkin æ ¸å¿ƒé—œéµå­—**

| **é—œéµå­—** | **ä½œç”¨** | 
|---|---|
| `Feature` | æ¸¬è©¦åŠŸèƒ½çš„æ¨™é¡Œï¼ˆæ•´å€‹æ¸¬è©¦çš„ä¸»é¡Œï¼‰ | 
| `Scenario` | æ¸¬è©¦æƒ…å¢ƒï¼Œæ¯å€‹ Scenario è¡¨ç¤ºä¸€å€‹æ¸¬è©¦æ¡ˆä¾‹ | 
| `Given` | å‰ç½®æ¢ä»¶ï¼ˆå ´æ™¯è¨­å®šï¼‰ | 
| `When` | è§¸ç™¼çš„å‹•ä½œï¼ˆåŸ·è¡Œæ­¥é©Ÿï¼‰ | 
| `Then` | é æœŸçµæœï¼ˆé©—è­‰çµæœï¼‰ | 
| `And` / `But` | ç”¨ä¾†é€£æ¥å¤šå€‹ `Given`ã€`When` æˆ– `Then` | 

PS:Â `And`Â å’ŒÂ `But`Â ä¸æ˜¯ç¡¬æ€§è¦ç”¨

**ğŸ¥ Note: ç•¶ Cucumber åœ¨å°‹æ‰¾Â `Gherkin Step`Â å°æ‡‰çš„å¯¦ä½œç¨‹å¼ (Step Definitions) æ™‚ï¼Œä¸æœƒç®¡é—œéµå­—æ˜¯ä»€éº¼ã€‚**

- æ›å¥è©±èªªï¼Œä¸èƒ½ä½¿ç”¨å…©å€‹**é—œéµå­—**å°åŒä¸€å¥æ–‡æ³•å®šç¾© step definition

- ä¾‹å¦‚ä»¥ä¸‹æœƒè¦–ç‚ºé‡è¤‡å®šç¾©ï¼š

```
Given I log in
Then I log in
```

**é—œéµå­—ï¼š**Given

**æ–‡æ³•å®šç¾©** ï¼šI log in

**Step definition**ï¼šğŸ‘‡

```plain
@Given("I log in")
fun clickOpenLoginPageBtn() {
    page.clickLogin()
}
```

## **ğŸ”¹ 3. Gherkin å¯¦æˆ°ç¤ºä¾‹**

è®“æˆ‘å€‘ç”¨ **Gherkin** ä¾†æ’°å¯«ä¸€å€‹ã€Œ**ç™»å…¥åŠŸèƒ½**ã€çš„æ¸¬è©¦æ¡ˆä¾‹ ğŸ“Œ

### **ğŸ“Œ ç™»å…¥åŠŸèƒ½çš„ Gherkin æ¸¬è©¦æ¡ˆä¾‹**

```gherkin
Feature: ä½¿ç”¨è€…ç™»å…¥

  Scenario: æˆåŠŸç™»å…¥
    Given ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢
    When ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ "user123" å’Œå¯†ç¢¼ "password123"
    And æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•
    Then ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°é¦–é 
```

âœ… **é€™æ®µæ¸¬è©¦æ¡ˆä¾‹çš„æ„ç¾©ï¼š**

- **Feature** èªªæ˜é€™å€‹æ¸¬è©¦æ˜¯é—œæ–¼ **ã€Œä½¿ç”¨è€…ç™»å…¥ã€**

- **Scenario** å®šç¾©ä¸€å€‹ã€ŒæˆåŠŸç™»å…¥ã€çš„æ¸¬è©¦å ´æ™¯

- **Given** è¡¨ç¤ºæ¸¬è©¦çš„ **å‰ç½®æ¢ä»¶**

- **When** è¡¨ç¤º **åŸ·è¡Œçš„è¡Œç‚º**

- **Then** è¡¨ç¤º **æœŸæœ›çš„çµæœ**

### **ğŸ“Œ å¤±æ•—ç™»å…¥æ¸¬è©¦æ¡ˆä¾‹**

```gherkin
Scenario: ç™»å…¥å¤±æ•—ï¼ˆéŒ¯èª¤å¯†ç¢¼ï¼‰
  Given ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢
  When ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ "user123" å’Œå¯†ç¢¼ "wrongpassword"
  And æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•
  Then ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "å¯†ç¢¼éŒ¯èª¤"
```

âœ… **é€™æ®µæ¸¬è©¦é©—è­‰ï¼š**

- å¦‚æœå¯†ç¢¼éŒ¯èª¤ï¼Œæ‡‰è©²è¦é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯

---

# **ğŸ”¹ 4. å¦‚ä½•åœ¨ Cucumber ä¸­åŸ·è¡Œ Gherkin æ¸¬è©¦ï¼Ÿ**

Cucumber æœƒæŠŠ **Gherkin æ¸¬è©¦æ¡ˆä¾‹** **å°æ‡‰åˆ° Java/Kotlin çš„æ¸¬è©¦ä»£ç¢¼**ï¼ˆç¨±ç‚º **Step Definitions**ï¼‰ã€‚

ğŸ›  **Step Definitionsï¼ˆæ­¥é©Ÿå®šç¾©ï¼‰ç¯„ä¾‹ï¼š**

```java
import io.cucumber.java.en.*;

public class LoginSteps {
    
    @Given("ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢")
    public void user_is_on_login_page() {
        System.out.println("æ‰“é–‹æ‡‰ç”¨ä¸¦å°èˆªåˆ°ç™»å…¥é é¢");
    }

    @When("ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ {string} å’Œå¯†ç¢¼ {string}")
    public void user_enters_credentials(String username, String password) {
        System.out.println("è¼¸å…¥å¸³è™Ÿï¼š" + username);
        System.out.println("è¼¸å…¥å¯†ç¢¼ï¼š" + password);
    }

    @And("æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•")
    public void user_clicks_login_button() {
        System.out.println("æŒ‰ä¸‹ç™»å…¥æŒ‰éˆ•");
    }

    @Then("ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°é¦–é ")
    public void user_sees_home_page() {
        System.out.println("é©—è­‰æ˜¯å¦é€²å…¥é¦–é ");
    }
}
```

### **ğŸ“Œ Step Definitions åšäº†ä»€éº¼ï¼Ÿ**

1. `@Given("ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢")`  

   - ç•¶ Gherkin æ¸¬è©¦æ¡ˆä¾‹é‡åˆ° **"Given ä½¿ç”¨è€…æ‰“é–‹æ‡‰ç”¨ç¨‹å¼ä¸¦åœ¨ç™»å…¥é é¢"** æ™‚ï¼ŒæœƒåŸ·è¡Œé€™å€‹ Java æ–¹æ³•ã€‚

2. `@When("ä½¿ç”¨è€…è¼¸å…¥å¸³è™Ÿ {string} å’Œå¯†ç¢¼ {string}")`  

   - `"{string}"` ä»£è¡¨ Gherkin å…§çš„ **è®Šæ•¸**ï¼ˆå¦‚ `"user123"` å’Œ `"password123"`ï¼‰

   - é€™æ¨£æ¸¬è©¦æ¡ˆä¾‹å¯ä»¥ç”¨ **ä¸åŒçš„å¸³è™Ÿå¯†ç¢¼** ä¾†åŸ·è¡Œä¸åŒæ¸¬è©¦

3. `@Then("ä½¿ç”¨è€…æ‡‰è©²çœ‹åˆ°é¦–é ")`  

   - é€™è£¡æœƒ **é©—è­‰æ¸¬è©¦çµæœ** æ˜¯å¦ç¬¦åˆé æœŸ

---

# **ğŸ”¹ 5. Cucumber æ¸¬è©¦å®Œæ•´æµç¨‹**

ğŸ“Œ **å­¸ç¿’æµç¨‹**
1ï¸âƒ£ **å®‰è£ Cucumber + Java ç’°å¢ƒ**ï¼ˆåœ¨ Android Studio æˆ– IntelliJ è¨­å®šï¼‰\
2ï¸âƒ£ **æ’°å¯« `.feature` æ¸¬è©¦æ¡ˆä¾‹**ï¼ˆç”¨ Gherkin èªæ³•ï¼‰\
3ï¸âƒ£ **å»ºç«‹ Step Definitions**ï¼ˆç”¨ Java å¯¦ä½œæ¸¬è©¦è¡Œç‚ºï¼‰\
4ï¸âƒ£ **åŸ·è¡Œ Cucumber æ¸¬è©¦**ï¼ˆåœ¨ IDE åŸ·è¡Œæˆ–æ•´åˆ CI/CDï¼‰  

---

# **ğŸ”¹ 6. ä½ ä¸‹ä¸€æ­¥è©²å­¸ä»€éº¼ï¼Ÿ**

âœ… **çŸ­æœŸç›®æ¨™**

- äº†è§£ **Gherkin èªæ³•**ï¼ˆæ’°å¯« Feature æ–‡ä»¶ï¼‰

- å­¸ç¿’ **å¦‚ä½•å°æ‡‰ Step Definitions**

- ç†Ÿæ‚‰ **Cucumber + Appium** çš„åŸºæœ¬æ•´åˆæ–¹å¼

âœ… **é€²éšç›®æ¨™**

- ä½¿ç”¨ **Page Object Modelï¼ˆPOMï¼‰** æ”¹å–„æ¸¬è©¦çµæ§‹

- åœ¨ **Jenkins æˆ– GitHub Actions** ä¸­é‹è¡Œ Cucumber æ¸¬è©¦

- ç”¢ç”Ÿ **æ¸¬è©¦å ±å‘Šï¼ˆAllure Reportsï¼‰**

---

# **ğŸš€ ç¸½çµ**

ğŸ”¹ **Cucumber** æ˜¯ä¸€å€‹ BDD æ¸¬è©¦æ¡†æ¶ï¼Œè®“æ¸¬è©¦æ¡ˆä¾‹**æ›´ç›´è¦ºã€æ›´å®¹æ˜“ç†è§£**\
ğŸ”¹ **Gherkin** æ˜¯ Cucumber çš„èªæ³•ï¼Œä½¿ç”¨ **Given-When-Then** ä¾†æè¿°æ¸¬è©¦\
ğŸ”¹ **Step Definitions** æœƒæŠŠ **Gherkin æ¸¬è©¦æ¡ˆä¾‹è½‰æˆç¨‹å¼ç¢¼** ä¾†åŸ·è¡Œ\
ğŸ”¹ **Cucumber å¯ä»¥èˆ‡ Appium æ•´åˆ**ï¼Œè®“ UI æ¸¬è©¦æ›´è‡ªå‹•åŒ–  

ğŸ“Œ **ä½ å¯ä»¥å…ˆç·´ç¿’æ’°å¯«ç°¡å–®çš„ `.feature` æ¸¬è©¦æ¡ˆä¾‹ï¼Œç„¶å¾Œå†é–‹å§‹å­¸ç¿’å¦‚ä½•å°æ‡‰ Step Definitionsï¼**\
æœ‰ä»»ä½•å•é¡Œéš¨æ™‚å•æˆ‘ ğŸ˜‰

---

- ***Source***ï¼š

   - [Cucumberå®˜æ–¹æ–‡ä»¶](https://cucumber.io/docs/) 

   - [Cucumberå®˜æ–¹æ•å­¸](https://cucumber.io/docs/guides/)

   - [Cucumber å…¥é–€ç­†è¨˜ (BDDè‡ªå‹•åŒ–æ¸¬è©¦æ¡†æ¶)](https://hackmd.io/@onejar99/BJ9LkkBNH)

   - [Cucumber-javaå…¥é—¨åŸºç¡€ç¯‡](https://blog.csdn.net/chengly0129/article/details/79197598)